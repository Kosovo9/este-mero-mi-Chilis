<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Christmas AI Studio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@400;700&display=swap"
    rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ['"Playfair Display"', 'serif'],
            sans: ['"Lato"', 'sans-serif'],
          },
          colors: {
            christmas: {
              red: '#8b0000',
              green: '#1a472a',
              gold: '#d4af37',
              cream: '#f5f5dc',
              dark: '#0f172a'
            }
          }
        }
      }
    }
  </script>
  <style>
    body {
      background-color: #0f172a;
      color: #f5f5dc;
    }

    .gold-gradient {
      background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    @keyframes fall {
      to {
        transform: translateY(105vh) translateX(20px);
        opacity: 0;
      }
    }

    .animate-fall {
      animation: fall linear forwards;
    }
  </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.1/",
    "react": "https://esm.sh/react@^19.2.1",
    "react-dom/": "https://esm.sh/react-dom@^19.2.1/",
    "@google/genai": "https://esm.sh/@google/genai@^1.32.0"
  }
}
</script>
</head>

<body>
  <div id="root"></div>
  <audio id="christmasAudio" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  </audio>
  <script>
    // 10X Optimized Snowfall Logic
    setInterval(() => {
      const container = document.getElementById('snow-container');
      if (!container) return;
      const flake = document.createElement('div');
      flake.className = 'fixed text-white pointer-events-none select-none z-[1000] animate-fall';
      flake.innerHTML = 'â„';
      flake.style.left = Math.random() * 100 + 'vw';
      flake.style.top = '-20px';
      flake.style.opacity = Math.random();
      flake.style.fontSize = (Math.random() * 10 + 10) + 'px';
      flake.style.animationDuration = (Math.random() * 3 + 7) + 's';
      container.appendChild(flake);
      setTimeout(() => flake.remove(), 10000);
    }, 400);

    // Music Player Logic
    document.addEventListener('click', function initMusic() {
      const audio = document.getElementById('christmasAudio');
      const toggle = document.getElementById('musicToggle');
      const slider = document.getElementById('volumeSlider');

      if (!audio || !toggle || !slider) return;

      audio.volume = 0.3;

      toggle.addEventListener('click', () => {
        if (audio.paused) {
          audio.play().catch(() => { });
          toggle.innerHTML = 'â¸ï¸';
        } else {
          audio.pause();
          toggle.innerHTML = 'ðŸŽµ';
        }
      });

      slider.addEventListener('input', (e) => {
        audio.volume = e.target.value / 100;
      });

      // Solo ejecutar una vez para inicializar listeners si los elementos existen
      document.removeEventListener('click', initMusic);
    }, { capture: true });
  </script>
</body>

</html>